---
title: "Introduction"
author: "Alexandre Courtiol"
date: "`r Sys.Date()`"
output:
  ioslides_presentation:
    widescreen: true
    smaller: true
vignette: >
  %\VignetteIndexEntry{1 Introduction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}

---
```{r setup, include=FALSE}
library(LM2GLMM)
```


# General information

## What do you need?
* a computer with internet connection
* a web browser (up-to-date)
* R version $\geq$ 3.3
* RStudio version $\geq$ 1.0 (recommended)

## How to access the course?

The course is an **R package** called **LM2GLMM**.

### Download
https://github.com/courtiol/LM2GLMM/releases
<br>

### Installation
```{r install_package, eval = FALSE}
install.packages(pkgs = "path/LM2GLMM") ## replace path by your path!
```
<br>

### Loading

```{r load_package, eval = FALSE}
library(package = "LM2GLMM")
```


## You should get that:

```
 #############################################
 #                                           #
 #     This is the package for the course    #
 #                                           #
 #    Advanced Statistical Applications:     #
 #          from LM to GLMM using R          #
 #                                           #
 #   You have the version X.X.X installed!   #
 #                                           #
 # Type browseVignettes(package = 'LM2GLMM') #
 #    to access the slides of the course     #
 #                                           #
 #############################################
```

### !!! Always check the version number !!!

# Refreshing your R skills

## Vectors: basics

```{r vectors basics}
foo <- c(1, 5, 5, 10, 23, NA, NA)
foo[2]
foo > 3
foo[foo > 3]
foo2 <- c(a = 1, b = 5, c = 10, d = 23)
foo2["b"]
```

## Vectors: some usefull functions

```{r vectors function}
length(foo)
summary(foo)
any(is.na(foo))
table(foo, useNA = "always")
```

## Vectors: classes

```{r vectors classes}
foo1 <- c(1, 5, 5, NA)
foo2 <- c(a = 1, b = 3)
foo3 <- foo1 > 3
foo4 <- c("a", "b", "c")
foo5 <- factor(foo3)
foo6 <- c(1L, 3L, 5L)

class(foo1)
```

```{r vectors class table, echo = FALSE}
classes <- unlist(lapply(as.list(names <- paste0("foo", 1:6)), function(x) class(get(x))))
knitr::kable(rbind(names, classes))
```

## Vectors: factors

```{r vetors factors}
foo <-  factor(c("a", "b", "c"))
(foo <- foo[foo != "b"]) ## Tip: the brackets force the display
(foo <- droplevels(foo))
```


## Attributes

```{r attributes}
foo <- c(a = 1, b = 5, c = 10, d = 23)
attributes(foo)
attr(foo, "names")  ## Tip: here a shortcut would be 'names(foo4)', but this is not general
foo <-  factor(c("a", "b", "c"))
attributes(foo)
```

## Dataframes: basics

```{r dataframe}
foo <- data.frame(
  x = c(1, 3, 5),
  z = factor(c("a", "b", "c"))
  )
foo
dim(foo) ## Tip: try nrow() and ncol()
dimnames(foo) ## Tip: try rownames() and colnames()
```

## Dataframes: indexing

```{r dataframe indexing}
foo[2, ]
foo[, 2]
foo$x
foo[, "x"]
```

## Matrices

```{r matrix}
foo <- matrix(data = 1:9, nrow = 3, ncol = 3) ## Tip: try with byrow = TRUE
colnames(foo) <- c("a", "b", "c")
rownames(foo) <- c("A", "B", "C")
foo
```

###You can manipulation them similarly as dataframe!

## Lists

```{r lists}
  foo <- list("foo1" = c(1:10), "foo2" = factor(c("a", "b")))
  foo
  foo[["foo2"]]
  foo$foo2
```

## Functions

```{r function}
addA_B <- function(a = 0, b = 0) {
  c <- a + b
  return(c)
  }
```

```{r function test}
addA_B(a = 5, b = 7)
addA_B(a = 5)
```

```{r function short}
addA_B_bis <- function(a, b) a + b
addA_B_bis(2, 3)
```

# Simulating data

## Why simulating data?
* it helps to understand what exactly linear models are
* it is a good way for you to know that you understand the meaning of your estimates
* it allows for the study of the power and robustness of LM in general and particular cases

## Pseudo-random numbers in R

```{r rnorm}
rnorm(5, mean = 2, sd = 0.1)  ## Tip: check ?Distributions for other distribution
rnorm(5, mean = 2, sd = 0.1)
set.seed(14353L)
rnorm(5, mean = 2, sd = 0.1)
set.seed(14353L)
rnorm(5, mean = 2, sd = 0.1)
```

## Step one: simulating the independent variables

### Goal
Complete the function that follows, so that is returns a dataframe containing 
1 continuous independent variable and 1 categorical independent variable.

```{r goal function}
simulate_my_predictors_1C1G <- function(n, k){
  ## n is the number of datapoints per group
  ## k is the number of groups
  ...
  }
```

## Step one: simulating the independent variables

### Goal
Complete the function that follows, so that is returns a dataframe containing 
1 continuous independent variable and 1 categorical independent variable.

### Possible solution
```{r target function}
simulate_predictors_1C1G
```

## Step two: simulating the response variables

### We first need to discus some basics about linear models!

